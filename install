#!/usr/bin/env bash
set -eo pipefail; [[ -n "$PLUSHU_TRACE" ]] && set -x

if [[ "$EUID" == 0 ]]; then
  # TODO: Check expected pitfalls first
  for plugin in git docker app-long-opt apps config domains app-name-domain \
    release-env start-web-deploy startup-deploy-all nginx-app-vhosts \
    buildstep git-apps nginx-container nginx-tuning
  do
    if [[ -d "$PLUSHU_ROOT/plugins/$plugin" ]]; then
      plushu plugins:reinstall "$plugin"
    else
      plushu plugins:install "$plugin"
    fi
  done
else
  echo "You need to re-install this plugin as root."
fi
